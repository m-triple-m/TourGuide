<div class="container-fluid top-con" *ngIf="currentuser">
  <p class="display-4 text-center">User Dashboard</p>
  <hr>
    <div class="row">
        <div class="col-md-4" style="border-right: 1px solid rgb(180, 180, 180);overflow-y: auto;height: 40rem;">
          <mat-card>
            <mat-card-content class="card-body">
              <!-- <div class="text-center">
                <img [src]="'http://localhost:3000/hostimages/'+currentuser.avatar" class="img-fluid rounded-circle">
              </div> -->
              <p class="h2">Hello {{currentuser.name}}</p>
              <hr>
              <div class="row align-items-center mt-4">
                <button mat-button class="btn btn-block" color="primary" (click)="toggleEditForm()">Account Details</button>
              </div>
              <hr>
              <div class="row align-items-center mt-4">
                <button mat-button class="btn btn-block" color="primary" (click)="toggleBookings()">Manage Bookings</button>
              </div>

            </mat-card-content>
          </mat-card>
        </div>
        <div class="col-md-8" style="overflow-y: auto;height: 40rem;">
            <div class="booking-area" *ngIf="showbookings">
              <mat-card>
                <mat-card-header>
                  <p class="h4 text-center">Ongoing Bookings</p>
                </mat-card-header>
                <hr>
                <div *ngIf="!bookings.length">
                  <p class="h2 mt-2 text-center">No Data Avalaible</p>
                </div>
                <mat-card-content class="card-body">
                  <mat-accordion *ngFor="let booking of bookings">
                    <mat-expansion-panel *ngIf="booking.verified">
                      <mat-expansion-panel-header color="primary">
                        <mat-panel-title>
                          {{booking.user.name}}
                        </mat-panel-title>
                        <mat-panel-description>
                          Booked : {{booking.booked | date}}
                        </mat-panel-description>
                      </mat-expansion-panel-header>
                      <div class="panel-body">
                          <p class="h6">Name : {{booking.user.name}}</p>
                          <p class="h6">Email : {{booking.user.email}}</p>
                          <p class="h6">Address :{{booking.user.address}}</p>
                          <hr>
                          <div class="row">
                            <p class="h6 col-md-6">Start Date :{{booking.startDate | date}}</p>
                            <p class="h6 col-md-6">End Date :{{booking.endDate | date}}</p>
                          </div>
                      </div>
                      
                    </mat-expansion-panel>
                  </mat-accordion>
                </mat-card-content>
              </mat-card>

              <mat-card>
                <mat-card-header>
                  <p class="h4 text-center">Pending Bookings</p>
                </mat-card-header>
                <hr>
                <div *ngIf="!bookings.length">
                  <p class="h2 mt-2 text-center">No Data Avalaible</p>
                </div>
                <mat-card-content class="card-body">
        
                  <mat-accordion *ngFor="let booking of bookings" >
                    <mat-expansion-panel *ngIf="!booking.verified">
                      <mat-expansion-panel-header color="primary">
                        <mat-panel-title>
                          {{booking.user.name}}
                        </mat-panel-title>
                        <mat-panel-description>
                          Booked : {{booking.booked | date}}
                        </mat-panel-description>
                      </mat-expansion-panel-header>
                      <div class="panel-body">
                          <p class="h6">Name : {{booking.user.name}}</p>
                          <p class="h6">Email : {{booking.user.email}}</p>
                          <p class="h6">Address :{{booking.user.address}}</p>
                          <hr>
                          <div class="row">
                            <p class="h6">Start Date :{{booking.startDate | date}}</p>
                            <p class="h6">End Date :{{booking.endDate | date}}</p>
                          </div>
                      </div>
                      
                    </mat-expansion-panel>
                  </mat-accordion>
        
                </mat-card-content>
              </mat-card>
            </div>


            <div class="container-fluid" *ngIf="showeditform">
              <p class="h2 text-center mt-5">Update User Details</p>
              <hr>
              <mat-card >
                <mat-card-content class="card-body">
            
                  <form [formGroup]="editform" (submit)="updateUser(editform.value)">
                    <div class="row mt-4">
                      <div class="col-md">
                        <div class="row mt-4">
                          <label class="col-form-label lab col-md-2">Name: </label>
                          <input class="form-control col-md-8" formControlName="name">
                        </div>
              
                        <div class="row mt-4">
                          <label class="col-form-label lab col-md-2">Password: </label>
                          <input class="form-control col-md-8" type="password" formControlName="password">
                        </div>
            
                        <div class="row mt-4">
                          <label class="col-form-label lab col-md-2">Address: </label>
                          <textarea class="form-control col-md-8" formControlName="address"></textarea>
                        </div>
                      </div>
                      <div class="col-md">
                        <div class="row mt-4">
                          <label class="col-form-label lab col-md-2">Username: </label>
                          <input class="form-control col-md-8" formControlName="username">
                        </div>
              
                        <div class="row mt-4">
                          <label class="col-form-label lab col-md-2">Email: </label>
                          <input class="form-control col-md-8" type="email" formControlName="email">
                        </div>
                        
                        <div class="row mt-5">
                          <div class="col-md-4">
                            <button mat-raised-button>Update details</button>
                          </div>
                        </div>
                        
                      </div>
                    </div>
                  </form>
                  
                </mat-card-content>
              </mat-card>
            </div>

        </div>
    </div>

</div>